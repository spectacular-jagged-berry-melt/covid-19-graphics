<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-161561782-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-161561782-1');
  </script>


  <title>Vatican City - covid.graphics</title>
  <link href="../stylesheets/site.css" rel="stylesheet" />
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <script src="../vendor/jquery/jquery.min.js"></script>
  <script src="../javascripts/site.js"></script>

  <script>
    var default_layout = {
      autosize: true,
      margin: { t: 0, l:30, r:15, b:45 },
      legend: {"orientation": "h", "traceorder": "normal"}
    };
    var default_config = {
      displayModeBar: false
    };


    var loaded_datasets = {};
    var country_datasets = {};
    function covid19_dataset_callback(dataset_name, dataset, metadata) {
      loaded_datasets[dataset_name] = dataset;
      if (metadata['country_iso']) {
        country_datasets[metadata['country_iso']] = dataset;
      }
    }

    function scale_permil(ts, country_code) {
      var millions = covid19_dataset_populations[country_code] / 1000000;
      return ts.map(function (x) {
              return x / millions;
      });
    }
    function scale_none(ts, country_code) {
      return ts;
    }

    function country_series_scaled(covid19_dataset, data, country_code, scale_function, legend_suffix) {
      var legend = covid19_dataset_country_names[country_code];
      var x_axis = covid19_dataset['timeseries_dates'];
      var ret = {};
      for (var stat in data['total']) {
        var statTitle = stat[0].toUpperCase() + stat.slice(1);
        ret[stat] = {
              x: x_axis,
              y: scale_function(data['total'][stat], country_code),
              name: legend + ', ' + statTitle + legend_suffix
        };
      }
      return ret;
    }

    function limit_to_biggest_series(traces, limit) {
      var ordered = traces.sort(function(a, b) {
        return b.y[b.y.length - 1] - a.y[a.y.length - 1];
      });

      for (var i in ordered) {
        if (i >= limit) {
          ordered[i]['visible'] = 'legendonly';
        }
      }

      return ordered;
    }

    function cumulative_to_delta(points) {
      var relative = [];
      var last = 0;
      for (var i in points) {
        var value = points[i];
        if (last == null) {
          relative.push(0);
        } else {
          relative.push(Math.max(0, value - last));
        }
        last = value;
      }
      return relative;
    }
  </script>

  <script src="https://theojulienne.github.io/covid-19-data/by_country/VAT.js"></script>
  <script src="https://theojulienne.github.io/covid-19-data/populations.js"></script>
  <script src="https://theojulienne.github.io/covid-19-data/countries.js"></script>

  <!-- Custom fonts for this template-->
  <link href="../vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

  <!-- Custom styles for this template-->
  <link href="../stylesheets/sb-admin-2.min.css" rel="stylesheet" />

  <link href="../vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet">

  <style>
  .table .sorting_1,
  .table .sorting_desc,
  .table .sorting_asc {
    background-color: #f6f6f6;
  }
  </style>

</head>

<body id="page-top">

  <!-- Page Wrapper -->
  <div id="wrapper">

    <!-- Sidebar -->
    <ul class="navbar-nav bg-gradient-dark sidebar sidebar-dark accordion" id="accordionSidebar">

      <!-- Sidebar - Brand -->
      <a class="sidebar-brand d-none d-md-flex align-items-center justify-content-center" href="/index.html">
        <div class="sidebar-brand-text mx-3">covid.graphics</div>
      </a>

      <!-- Divider -->
      <hr class="sidebar-divider my-0">

      <!-- Nav Item - Dashboard -->
      <li class="nav-item active">
        <a class="nav-link" href="/index.html">
          <i class="fas fa-globe-americas"></i>
          <span>COVID-19 Worldwide</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/countries.html">
          <i class="fas fa-table"></i>
          <span>Country summary table</span></a>
      </li>

      <!-- Divider -->
      <hr class="sidebar-divider">

      <!-- Heading -->
      <div class="sidebar-heading">
        MORE DATA
      </div>

      <!-- Nav Item - Pages Collapse Menu -->
      <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
          <i class="fas fa-flag"></i>
          <span>By Country</span>
        </a>
        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
          <div class="bg-white py-2 collapse-inner rounded">
            <h6 class="collapse-header">Countries:</h6>
            <a class="collapse-item" href="/country/afg.html">Afghanistan</a>
            <a class="collapse-item" href="/country/alb.html">Albania</a>
            <a class="collapse-item" href="/country/dza.html">Algeria</a>
            <a class="collapse-item" href="/country/and.html">Andorra</a>
            <a class="collapse-item" href="/country/atg.html">Antigua & Barbuda</a>
            <a class="collapse-item" href="/country/arg.html">Argentina</a>
            <a class="collapse-item" href="/country/arm.html">Armenia</a>
            <a class="collapse-item" href="/country/aus.html">Australia</a>
            <a class="collapse-item" href="/country/aut.html">Austria</a>
            <a class="collapse-item" href="/country/aze.html">Azerbaijan</a>
            <a class="collapse-item" href="/country/bhs.html">Bahamas</a>
            <a class="collapse-item" href="/country/bhr.html">Bahrain</a>
            <a class="collapse-item" href="/country/bgd.html">Bangladesh</a>
            <a class="collapse-item" href="/country/brb.html">Barbados</a>
            <a class="collapse-item" href="/country/blr.html">Belarus</a>
            <a class="collapse-item" href="/country/bel.html">Belgium</a>
            <a class="collapse-item" href="/country/ben.html">Benin</a>
            <a class="collapse-item" href="/country/btn.html">Bhutan</a>
            <a class="collapse-item" href="/country/bol.html">Bolivia</a>
            <a class="collapse-item" href="/country/bih.html">Bosnia</a>
            <a class="collapse-item" href="/country/bra.html">Brazil</a>
            <a class="collapse-item" href="/country/brn.html">Brunei</a>
            <a class="collapse-item" href="/country/bgr.html">Bulgaria</a>
            <a class="collapse-item" href="/country/bfa.html">Burkina Faso</a>
            <a class="collapse-item" href="/country/khm.html">Cambodia</a>
            <a class="collapse-item" href="/country/cmr.html">Cameroon</a>
            <a class="collapse-item" href="/country/can.html">Canada</a>
            <a class="collapse-item" href="/country/caf.html">Central African Republic</a>
            <a class="collapse-item" href="/country/tcd.html">Chad</a>
            <a class="collapse-item" href="/country/chl.html">Chile</a>
            <a class="collapse-item" href="/country/chn.html">China</a>
            <a class="collapse-item" href="/country/col.html">Colombia</a>
            <a class="collapse-item" href="/country/cog.html">Congo - Brazzaville</a>
            <a class="collapse-item" href="/country/cod.html">Congo - Kinshasa</a>
            <a class="collapse-item" href="/country/cri.html">Costa Rica</a>
            <a class="collapse-item" href="/country/hrv.html">Croatia</a>
            <a class="collapse-item" href="/country/cub.html">Cuba</a>
            <a class="collapse-item" href="/country/cyp.html">Cyprus</a>
            <a class="collapse-item" href="/country/cze.html">Czechia</a>
            <a class="collapse-item" href="/country/civ.html">Côte d’Ivoire</a>
            <a class="collapse-item" href="/country/dnk.html">Denmark</a>
            <a class="collapse-item" href="/country/dji.html">Djibouti</a>
            <a class="collapse-item" href="/country/dom.html">Dominican Republic</a>
            <a class="collapse-item" href="/country/ecu.html">Ecuador</a>
            <a class="collapse-item" href="/country/egy.html">Egypt</a>
            <a class="collapse-item" href="/country/slv.html">El Salvador</a>
            <a class="collapse-item" href="/country/gnq.html">Equatorial Guinea</a>
            <a class="collapse-item" href="/country/est.html">Estonia</a>
            <a class="collapse-item" href="/country/swz.html">Eswatini</a>
            <a class="collapse-item" href="/country/eth.html">Ethiopia</a>
            <a class="collapse-item" href="/country/fji.html">Fiji</a>
            <a class="collapse-item" href="/country/fin.html">Finland</a>
            <a class="collapse-item" href="/country/fra.html">France</a>
            <a class="collapse-item" href="/country/gab.html">Gabon</a>
            <a class="collapse-item" href="/country/gmb.html">Gambia</a>
            <a class="collapse-item" href="/country/geo.html">Georgia</a>
            <a class="collapse-item" href="/country/deu.html">Germany</a>
            <a class="collapse-item" href="/country/gha.html">Ghana</a>
            <a class="collapse-item" href="/country/grc.html">Greece</a>
            <a class="collapse-item" href="/country/gtm.html">Guatemala</a>
            <a class="collapse-item" href="/country/gin.html">Guinea</a>
            <a class="collapse-item" href="/country/guy.html">Guyana</a>
            <a class="collapse-item" href="/country/hnd.html">Honduras</a>
            <a class="collapse-item" href="/country/hun.html">Hungary</a>
            <a class="collapse-item" href="/country/isl.html">Iceland</a>
            <a class="collapse-item" href="/country/ind.html">India</a>
            <a class="collapse-item" href="/country/idn.html">Indonesia</a>
            <a class="collapse-item" href="/country/irn.html">Iran</a>
            <a class="collapse-item" href="/country/irq.html">Iraq</a>
            <a class="collapse-item" href="/country/irl.html">Ireland</a>
            <a class="collapse-item" href="/country/isr.html">Israel</a>
            <a class="collapse-item" href="/country/ita.html">Italy</a>
            <a class="collapse-item" href="/country/jam.html">Jamaica</a>
            <a class="collapse-item" href="/country/jpn.html">Japan</a>
            <a class="collapse-item" href="/country/jor.html">Jordan</a>
            <a class="collapse-item" href="/country/kaz.html">Kazakhstan</a>
            <a class="collapse-item" href="/country/ken.html">Kenya</a>
            <a class="collapse-item" href="/country/rks.html">Kosovo</a>
            <a class="collapse-item" href="/country/kwt.html">Kuwait</a>
            <a class="collapse-item" href="/country/kgz.html">Kyrgyzstan</a>
            <a class="collapse-item" href="/country/lva.html">Latvia</a>
            <a class="collapse-item" href="/country/lbn.html">Lebanon</a>
            <a class="collapse-item" href="/country/lbr.html">Liberia</a>
            <a class="collapse-item" href="/country/lie.html">Liechtenstein</a>
            <a class="collapse-item" href="/country/ltu.html">Lithuania</a>
            <a class="collapse-item" href="/country/lux.html">Luxembourg</a>
            <a class="collapse-item" href="/country/mys.html">Malaysia</a>
            <a class="collapse-item" href="/country/mdv.html">Maldives</a>
            <a class="collapse-item" href="/country/mlt.html">Malta</a>
            <a class="collapse-item" href="/country/mtq.html">Martinique</a>
            <a class="collapse-item" href="/country/mrt.html">Mauritania</a>
            <a class="collapse-item" href="/country/mus.html">Mauritius</a>
            <a class="collapse-item" href="/country/mex.html">Mexico</a>
            <a class="collapse-item" href="/country/mda.html">Moldova</a>
            <a class="collapse-item" href="/country/mco.html">Monaco</a>
            <a class="collapse-item" href="/country/mng.html">Mongolia</a>
            <a class="collapse-item" href="/country/mne.html">Montenegro</a>
            <a class="collapse-item" href="/country/mar.html">Morocco</a>
            <a class="collapse-item" href="/country/nam.html">Namibia</a>
            <a class="collapse-item" href="/country/npl.html">Nepal</a>
            <a class="collapse-item" href="/country/nld.html">Netherlands</a>
            <a class="collapse-item" href="/country/nzl.html">New Zealand</a>
            <a class="collapse-item" href="/country/nic.html">Nicaragua</a>
            <a class="collapse-item" href="/country/nga.html">Nigeria</a>
            <a class="collapse-item" href="/country/mkd.html">North Macedonia</a>
            <a class="collapse-item" href="/country/nor.html">Norway</a>
            <a class="collapse-item" href="/country/omn.html">Oman</a>
            <a class="collapse-item" href="/country/pak.html">Pakistan</a>
            <a class="collapse-item" href="/country/pan.html">Panama</a>
            <a class="collapse-item" href="/country/pry.html">Paraguay</a>
            <a class="collapse-item" href="/country/per.html">Peru</a>
            <a class="collapse-item" href="/country/phl.html">Philippines</a>
            <a class="collapse-item" href="/country/pol.html">Poland</a>
            <a class="collapse-item" href="/country/prt.html">Portugal</a>
            <a class="collapse-item" href="/country/qat.html">Qatar</a>
            <a class="collapse-item" href="/country/rou.html">Romania</a>
            <a class="collapse-item" href="/country/rus.html">Russia</a>
            <a class="collapse-item" href="/country/rwa.html">Rwanda</a>
            <a class="collapse-item" href="/country/smr.html">San Marino</a>
            <a class="collapse-item" href="/country/sau.html">Saudi Arabia</a>
            <a class="collapse-item" href="/country/sen.html">Senegal</a>
            <a class="collapse-item" href="/country/srb.html">Serbia</a>
            <a class="collapse-item" href="/country/syc.html">Seychelles</a>
            <a class="collapse-item" href="/country/sgp.html">Singapore</a>
            <a class="collapse-item" href="/country/svk.html">Slovakia</a>
            <a class="collapse-item" href="/country/svn.html">Slovenia</a>
            <a class="collapse-item" href="/country/som.html">Somalia</a>
            <a class="collapse-item" href="/country/zaf.html">South Africa</a>
            <a class="collapse-item" href="/country/kor.html">South Korea</a>
            <a class="collapse-item" href="/country/esp.html">Spain</a>
            <a class="collapse-item" href="/country/lka.html">Sri Lanka</a>
            <a class="collapse-item" href="/country/lca.html">St. Lucia</a>
            <a class="collapse-item" href="/country/vct.html">St. Vincent & Grenadines</a>
            <a class="collapse-item" href="/country/sdn.html">Sudan</a>
            <a class="collapse-item" href="/country/sur.html">Suriname</a>
            <a class="collapse-item" href="/country/swe.html">Sweden</a>
            <a class="collapse-item" href="/country/che.html">Switzerland</a>
            <a class="collapse-item" href="/country/twn.html">Taiwan</a>
            <a class="collapse-item" href="/country/tza.html">Tanzania</a>
            <a class="collapse-item" href="/country/tha.html">Thailand</a>
            <a class="collapse-item" href="/country/tgo.html">Togo</a>
            <a class="collapse-item" href="/country/tto.html">Trinidad & Tobago</a>
            <a class="collapse-item" href="/country/tun.html">Tunisia</a>
            <a class="collapse-item" href="/country/tur.html">Turkey</a>
            <a class="collapse-item" href="/country/gbr.html">UK</a>
            <a class="collapse-item" href="/country/usa.html">US</a>
            <a class="collapse-item" href="/country/ukr.html">Ukraine</a>
            <a class="collapse-item" href="/country/are.html">United Arab Emirates</a>
            <a class="collapse-item" href="/country/ury.html">Uruguay</a>
            <a class="collapse-item" href="/country/uzb.html">Uzbekistan</a>
            <a class="collapse-item" href="/country/vat.html">Vatican City</a>
            <a class="collapse-item" href="/country/ven.html">Venezuela</a>
            <a class="collapse-item" href="/country/vnm.html">Vietnam</a>
            <a class="collapse-item" href="/country/zmb.html">Zambia</a>
          </div>
        </div>
      </li>

      <!-- Divider -->
      <hr class="sidebar-divider">


    </ul>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content">

        <!-- Topbar -->
        <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

          <!-- sidebar toggle -->
          <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
            <i class="fa fa-bars"></i>
          </button>

          <a class="d-md-none align-items-center justify-content-center" href="/index.html">
            <div class="">covid.graphics</div>
          </a>

          <!-- Topbar Navbar -->
          <ul class="navbar-nav ml-auto">

            <!-- Nav Item - Fork on GitHub -->
            <li class="nav-item no-arrow mx-1">
              <a class="nav-link" href="https://github.com/theojulienne/covid-19-graphics" role="button">
                <span class="mr-2 text-gray-600"><i class="fab fa-github fa-fw"></i> <span class="small d-none d-lg-inline">Contribute on GitHub</span></span>
              </a>
            </li>

          </ul>

        </nav>
        <!-- End of Topbar -->

        <!-- Begin Page Content -->
        <div class="container-fluid">

          <div class="d-sm-flex align-items-center justify-content-between mb-4">
  <h1 class="h3 mb-0 text-gray-800">COVID-19 in Vatican City</h1>
</div>

<div class="row">

  <script>
    var country_dataset = covid19_dataset_country_vat;

    var latest_numbers = {};
    for (var stat in country_dataset['total']) {
      var data = country_dataset['total'][stat];
      latest_numbers[stat] = data[data.length - 1];
    }
  </script>

  <div class="col-xl-3 col-md-6 mb-4">
  <div class="card border-left-primary shadow h-100 py-2">
    <div class="card-body">
      <div class="row no-gutters align-items-center">
        <div class="col mr-2">
          <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Confirmed Cases</div>
          <div class="h5 mb-0 font-weight-bold text-gray-800"><script>document.write(latest_numbers['confirmed'] != null ? latest_numbers['confirmed'].toLocaleString() : "unknown");</script></div>
        </div>
        <div class="col-auto">
          <i class="fas fa-meh fa-2x text-gray-300"></i>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="col-xl-3 col-md-6 mb-4">
  <div class="card border-left-danger shadow h-100 py-2">
    <div class="card-body">
      <div class="row no-gutters align-items-center">
        <div class="col mr-2">
          <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Deaths</div>
          <div class="h5 mb-0 font-weight-bold text-gray-800"><script>document.write(latest_numbers['deaths'] != null ? latest_numbers['deaths'].toLocaleString() : "unknown");</script></div>
        </div>
        <div class="col-auto">
          <i class="fas fa-sad-tear fa-2x text-gray-300"></i>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="col-xl-3 col-md-6 mb-4">
  <div class="card border-left-success shadow h-100 py-2">
    <div class="card-body">
      <div class="row no-gutters align-items-center">
        <div class="col mr-2">
          <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Recovered</div>
          <div class="h5 mb-0 font-weight-bold text-gray-800"><script>document.write(latest_numbers['recovered'] != null ? latest_numbers['recovered'].toLocaleString() : "unknown");</script></div>
        </div>
        <div class="col-auto">
          <i class="fas fa-smile fa-2x text-gray-300"></i>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="col-xl-3 col-md-6 mb-4">
  <div class="card border-left-info shadow h-100 py-2">
    <div class="card-body">
      <div class="row no-gutters align-items-center">
        <div class="col mr-2">
          <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Mortality Rate</div>
          <div class="h5 mb-0 font-weight-bold text-gray-800">
          <script>
          var percent = Math.round(10000 * latest_numbers['deaths'] / latest_numbers['confirmed']) / 100;
          document.write(percent.toLocaleString());
          </script>%
          </div>
        </div>
        <div class="col-auto">
          <i class="fas fa-percent fa-2x text-gray-300"></i>
        </div>
      </div>
    </div>
  </div>
</div>

</div>



<div class="row" id="graph_overview_row">

  <div class="col-xl-12 col-lg-7">
    <div class="card shadow mb-4">
      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
        <h6 class="m-0 font-weight-bold text-primary">Total cases of COVID-19 in Vatican City</h6>
      </div>
      
      <div class="card-body">
        <div id="graph_overview" class="plotly-graph-needs-resize" style="width: 100%;height:400px;"></div>
      </div>
    </div>
  </div>
  
</div>
<div class="row" id="graph_states_row">

  <div class="col-xl-12 col-lg-7">
    <div class="card shadow mb-4">
      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
        <h6 class="m-0 font-weight-bold text-primary">Diagnoses in states and territories over time</h6>
      </div>
      
      <div class="card-body">
        <div id="graph_states" class="plotly-graph-needs-resize" style="width: 100%;height:400px;"></div>
      </div>
    </div>
  </div>
  
</div>
<div class="row" id="graph_new_cases_row">

  <div class="col-xl-12 col-lg-7">
    <div class="card shadow mb-4">
      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
        <h6 class="m-0 font-weight-bold text-primary">New cases per day</h6>
      </div>
      
      <div class="card-body">
        <div id="graph_new_cases" class="plotly-graph-needs-resize" style="width: 100%;height:400px;"></div>
      </div>
    </div>
  </div>
  
</div>
<div class="row" id="graph_tests_row">

  <div class="col-xl-12 col-lg-7">
    <div class="card shadow mb-4">
      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
        <h6 class="m-0 font-weight-bold text-primary">Tests per day in states and territories that report it</h6>
      </div>
      
      <div class="card-body">
        <div id="graph_tests" class="plotly-graph-needs-resize" style="width: 100%;height:400px;"></div>
      </div>
    </div>
  </div>
  
</div>
<div class="row" id="graph_deaths_row">

  <div class="col-xl-12 col-lg-7">
    <div class="card shadow mb-4">
      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
        <h6 class="m-0 font-weight-bold text-primary">Daily deaths from COVID-19 across Vatican City</h6>
      </div>
      
      <div class="card-body">
        <div id="graph_deaths" class="plotly-graph-needs-resize" style="width: 100%;height:400px;"></div>
      </div>
    </div>
  </div>
  
</div>

<script>
  var has_states = (country_dataset['subseries'] && Object.keys(country_dataset['subseries']).length > 0);
  var lines = [];

  for (var stat in country_dataset['total']) {
    if (stat != 'confirmed' && stat != 'recovered' && stat != 'deaths') continue;
    lines.push(country_series_scaled(country_dataset, country_dataset, 'VAT', scale_none, '')[stat]);
  }

  Plotly.newPlot('graph_overview', lines, default_layout, default_config);

  if (!has_states) {
    // no data, so remove the whole row
    $('#graph_states_row').remove();
  } else {
    var subseries_lines = [];

    for (var subregion in country_dataset['subseries']) {
      var dataset = country_dataset['subseries'][subregion]['total'];
      subseries_lines.push({
        x: country_dataset['timeseries_dates'],
        y: dataset['confirmed'],
        name: subregion,
      });
    }

    Plotly.newPlot('graph_states', limit_to_biggest_series(subseries_lines, 10), default_layout, default_config);
  }

  var new_cases = [];
  if (!has_states) {
    new_cases.push({
      x: country_dataset['timeseries_dates'],
      y: cumulative_to_delta(country_dataset['total']['confirmed']),
      type: 'bar',
    });
  } else {
    for (var subregion in country_dataset['subseries']) {
      new_cases.push({
        x: country_dataset['timeseries_dates'],
        y: cumulative_to_delta(country_dataset['subseries'][subregion]['total']['confirmed']),
        type: 'bar',
        name: subregion,
      });
    }
  }

  Plotly.newPlot('graph_new_cases', limit_to_biggest_series(new_cases, 10), $.extend({}, default_layout, {barmode: 'stack'}), $.extend({}, default_config));

  // tests per day per state
  if (has_states) {
    var tested_data = [];
    for (var subregion in country_dataset['subseries']) {
      if (!country_dataset['subseries'][subregion]['total']['tested']) continue;
      tested_data.push({
        x: country_dataset['timeseries_dates'],
        y: cumulative_to_delta(country_dataset['subseries'][subregion]['total']['tested']),
        type: 'bar',
        name: subregion,
      });
    }
    if (tested_data.length == 0) {
      $('#graph_tests_row').remove();
    } else {
      tested_data.push({
        x: country_dataset['timeseries_dates'],
        y: cumulative_to_delta(country_dataset['total']['confirmed']),
        type: 'line',
        name: 'Confirmed cases (country)',
      });

      Plotly.newPlot('graph_tests', limit_to_biggest_series(tested_data, 10), $.extend({}, default_layout, {barmode: 'stack'}), $.extend({}, default_config));
    }
  } else {
    $('#graph_tests_row').remove();
  }

  // deaths

  var new_deaths = [];
  if (!has_states) {
    new_deaths.push({
      x: country_dataset['timeseries_dates'],
      y: cumulative_to_delta(country_dataset['total']['deaths']),
      type: 'bar',
    });
  } else {
    for (var subregion in country_dataset['subseries']) {
      new_deaths.push({
        x: country_dataset['timeseries_dates'],
        y: cumulative_to_delta(country_dataset['subseries'][subregion]['total']['deaths']),
        type: 'bar',
        name: subregion,
      });
    }
  }

  Plotly.newPlot('graph_deaths', limit_to_biggest_series(new_deaths, 10), $.extend({}, default_layout, {barmode: 'stack'}), $.extend({}, default_config));

</script>


        </div>
        <!-- /.container-fluid -->

      </div>
      <!-- End of Main Content -->

      <!-- Footer -->
      <footer class="sticky-footer bg-white">
        <div class="container my-auto">
          <div class="copyright text-center my-auto">
            Based on <a href="https://github.com/theojulienne/covid-19-data">open source data collections</a> based off various sources including the <a href="https://github.com/CSSEGISandData/COVID-19">JHU CSSE data</a>, <a href="https://covidtracking.com/">covidtracking.com (US)</a> and many others.<br />
            <br />
            This data and the graphs here are unofficial, and contributors are software developers, not epidemiologists.<br />
            <br />
            Uses wonderful open source projects like <a href="https://startbootstrap.com/themes/sb-admin-2/">sb-admin-2 theme</a>, <a href="https://middlemanapp.com/">Middleman</a>, and hosted and built freely using <a href="https://github.com/features/actions">GitHub Actions</a> and <a href="https://pages.github.com/">GitHub Pages</a>.
          </div>
        </div>
      </footer>
      <!-- End of Footer -->

    </div>
    <!-- End of Content Wrapper -->

  </div>
  <!-- End of Page Wrapper -->

  <!-- Bootstrap core JavaScript-->
  <script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="../vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Page level plugins -->
  <script src="../vendor/chart.js/Chart.min.js"></script>

</body>

</html>
